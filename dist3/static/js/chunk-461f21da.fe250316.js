(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-461f21da"],{"32f5":function(t,e,s){"use strict";s("ecbf")},"99af":function(t,e,s){"use strict";var o=s("23e7"),i=s("d039"),n=s("e8b5"),a=s("861d"),c=s("7b0b"),r=s("50c4"),l=s("8418"),d=s("65f0"),u=s("1dde"),f=s("b622"),h=s("2d00"),g=f("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",p=h>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),b=u("concat"),G=function(t){if(!a(t))return!1;var e=t[g];return void 0!==e?!!e:n(t)},k=!p||!b;o({target:"Array",proto:!0,forced:k},{concat:function(t){var e,s,o,i,n,a=c(this),u=d(a,0),f=0;for(e=-1,o=arguments.length;e<o;e++)if(n=-1===e?a:arguments[e],G(n)){if(i=r(n.length),f+i>v)throw TypeError(m);for(s=0;s<i;s++,f++)s in n&&l(u,f,n[s])}else{if(f>=v)throw TypeError(m);l(u,f++,n)}return u.length=f,u}})},b0c0:function(t,e,s){var o=s("83ab"),i=s("9bf2").f,n=Function.prototype,a=n.toString,c=/^\s*function ([^ (]*)/,r="name";o&&!(r in n)&&i(n,r,{configurable:!0,get:function(){try{return a.call(this).match(c)[1]}catch(t){return""}}})},ba9f:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"top"},[s("van-nav-bar",{attrs:{title:"商品列表","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight},scopedSlots:t._u([{key:"right",fn:function(){return[s("van-icon",{attrs:{name:"search",size:"70",color:"#fff"}})]},proxy:!0}])}),s("div",{staticClass:"sort"},[s("div",{staticClass:"sort-item",class:{selected:1==t.select},on:{click:function(e){return t.order(1)}}},[t._v(" 默认 ")]),s("div",{staticClass:"sort-item",class:{selected:2==t.select},on:{click:function(e){return t.order(2)}}},[t._v(" 人气 ")]),s("div",{staticClass:"sort-item",class:{selected:3==t.select},on:{click:function(e){return t.order(3)}}},[t._v(" 新品 ")]),s("div",{staticClass:"sort-item",on:{click:function(e){return t.order(4)}}},[s("span",{class:{selected:t.select>=4}},[t._v("价格")]),s("div",{staticClass:"jiantou"},[s("span",{staticClass:"iconfont icon-shangjiantou",class:{selected:4==t.select}}),s("span",{staticClass:"iconfont icon-jiantou9",class:{selected:5==t.select}})])]),s("div",{staticClass:"sort-item"},[t._v("筛选")])])],1),t.flag?s("div",{staticClass:"content"},[s("van-pull-refresh",{attrs:{"head-height":"100"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.goodsList,(function(e){return s("div",{key:e.id,staticClass:"good",on:{click:function(s){return t.goDetail(e.id)}}},[s("img",{attrs:{src:e.goodsimg}}),s("div",{staticClass:"goodname"},[t._v(t._s(e.goodsname))]),s("div",{staticClass:"goodprice"},[t._v("￥"+t._s(e.goodsprice))])])})),0)],1)],1):t._e()])},i=[],n=(s("99af"),s("c975"),s("fb6a"),s("b0c0"),s("5530")),a=s("2f62"),c=s("e8b1"),r={data:function(){return{allGoods:[],goodsList:[],startNum:0,endNum:10,select:1,flag:!1,loading:!1,finished:!1,refreshing:!1}},methods:Object(n["a"])(Object(n["a"])({},Object(a["b"])(["changeNavFlag"])),{},{goDetail:function(t){this.$router.push({name:"goodsdetail",params:{id:t}})},onClickLeft:function(){this.$router.push({name:"classify"})},onClickRight:function(){this.$router.push({name:"search"})},order:function(t){var e=this;switch(4==this.select&&4==t?(this.select=5,t=5):5==this.select&&4==t?this.select=4:this.select=t,console.log(this.select,t),t){case 1:c["a"].getGoodsList({id:10}).then((function(t){e.allGoods=t.data[0].list,e.goodsList=e.allGoods.slice(0,10)}));break;case 2:this.allGoods.sort((function(t,e){return e.popular-t.popular})),this.goodsList=this.allGoods.slice(0,10);break;case 3:this.allGoods.sort((function(t,e){return e.id-t.id})),this.goodsList=this.allGoods.slice(0,10);break;case 4:this.allGoods.sort((function(t,e){return t.goodsprice-e.goodsprice})),this.goodsList=this.allGoods.slice(0,10);break;case 5:this.allGoods.sort((function(t,e){return e.goodsprice-t.goodsprice})),this.goodsList=this.allGoods.slice(0,10);break}},onLoad:function(){var t=this;this.startNum+=10,this.endNum+=10,this.endNum=this.endNum>this.allGoods.length?this.allGoods.length:this.endNum,setTimeout((function(){t.refreshing&&(t.startNum=0,t.endNum=10,t.goodsList=[],t.refreshing=!1),console.log(t.startNum,t.endNum,t.allGoods.length),t.goodsList=t.goodsList.concat(t.allGoods.slice(t.startNum,t.endNum)),t.loading=!1,t.goodsList.length>=t.allGoods.length&&(t.finished=!0)}),1e3)},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()}}),computed:Object(n["a"])({},Object(a["c"])(["keyWord"])),beforeRouteEnter:function(t,e,s){s((function(t){t.changeNavFlag(!1),e.name&&-1!=e.name.indexOf("search")?c["a"].getGoodsByKey({q:t.keyWord}).then((function(e){t.allGoods=e.data,t.goodsList=t.allGoods.slice(0,10),t.flag=!0})):c["a"].getGoodsList({id:10}).then((function(e){t.allGoods=e.data[0].list,t.goodsList=t.allGoods.slice(0,10),t.flag=!0}))}))},created:function(){},beforeRouteLeave:function(t,e,s){this.changeNavFlag(!0),s()}},l=r,d=(s("32f5"),s("2877")),u=Object(d["a"])(l,o,i,!1,null,"e431817c",null);e["default"]=u.exports},e8b1:function(t,e,s){"use strict";s("4de4");var o=s("ce0d"),i={getClassifyList:function(){return Object(o["a"])({url:"/self/classify",method:"get"})},getGoodsList:function(t){return Object(o["a"])({url:"/self/goodslist",method:"get",params:t})},getGoodsInfo:function(t){return Object(o["a"])({url:"/self/goodslist/10",method:"get"}).then((function(e){var s=e.data.list;return s.filter((function(e){return e.id==t}))[0]}))},getList:function(){return Object(o["a"])({url:"http://www.jiudoujishi.com/api/goods/get_goods_cat_list",method:"get"})},getGoodsByKey:function(t){return Object(o["a"])({url:"/self/searchlist",method:"get",params:t})}};e["a"]=i},ecbf:function(t,e,s){},fb6a:function(t,e,s){"use strict";var o=s("23e7"),i=s("861d"),n=s("e8b5"),a=s("23cb"),c=s("50c4"),r=s("fc6a"),l=s("8418"),d=s("b622"),u=s("1dde"),f=s("ae40"),h=u("slice"),g=f("slice",{ACCESSORS:!0,0:0,1:2}),v=d("species"),m=[].slice,p=Math.max;o({target:"Array",proto:!0,forced:!h||!g},{slice:function(t,e){var s,o,d,u=r(this),f=c(u.length),h=a(t,f),g=a(void 0===e?f:e,f);if(n(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?i(s)&&(s=s[v],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return m.call(u,h,g);for(o=new(void 0===s?Array:s)(p(g-h,0)),d=0;h<g;h++,d++)h in u&&l(o,d,u[h]);return o.length=d,o}})}}]);
//# sourceMappingURL=chunk-461f21da.fe250316.js.map